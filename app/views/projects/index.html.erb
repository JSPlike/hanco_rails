<%# 동적폼 생성을 위한 폼태그 %>

<div class="container-fluid">
  <div class="vertical-grid-hc">
    <div class="horizon-grid-hc">
      <%=form_tag projects_create_path, :name => "resultHiddenForm" do%>
      <%end%>
      <button id="btn-1" class="individual-project">ME</button>
      <button id="btn-2" class="team-project">WE</button>


      <!-- The Modal -->
      <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <div>                                                           
            <label>Name</label>
            <br>
            <input type="text" class="form-control" id="title">
            <br>
            <label>Description</label>
            <br>
            <textarea  class="form-control" id="description"></textarea><br>
            <input id="newProject" class="btn btn-primary" type="button" value="프로젝트 생성하기" onclick="">
          </div>
        </div>
      </div>
    </div>
  </div>
  <a href='/projects/myproject'>프로젝트 페이지</a>
</div>
<script>
  // Get the modal
  var projectkind = 0;

  var modal = document.getElementById('myModal');

  // Get the button that opens the modal
  var btn = document.getElementById("btn-1");
  var btn2 = document.getElementById("btn-2");

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];                                          

  // When the user clicks on the button, open the modal 
  btn.onclick = function() {
      modal.style.display = "block";
      projectkind = 1;
  }
  btn2.onclick = function(){
      modal.style.display = "block";
      projectkind = 2;
  }
  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
      modal.style.display = "none";
  }
  newProject.onclick = function(){
      //목적지는 create title과 project_kind 보내야함

    var title = document.getElementById("title").value;
    var desc = document.getElementById("description").value;
    var form = document.resultHiddenForm;
    var hiddenField = document.createElement("input");

    hiddenField.setAttribute("type", "hidden");
    hiddenField.setAttribute("name", "title");
    hiddenField.setAttribute("value", title);
    form.appendChild(hiddenField);

    hiddenField = document.createElement("input");
    hiddenField.setAttribute("type", "hidden");
    hiddenField.setAttribute("name", "desc");
    hiddenField.setAttribute("value", desc);
    form.appendChild(hiddenField);

    hiddenField = document.createElement("input");
    hiddenField.setAttribute("type", "hidden");
    hiddenField.setAttribute("name", "project_kind");
    hiddenField.setAttribute("value", projectkind);
    form.appendChild(hiddenField);


    form.submit();

  }
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
      if (event.target == modal) {
          modal.style.display = "none";
      }
  }

</script>

